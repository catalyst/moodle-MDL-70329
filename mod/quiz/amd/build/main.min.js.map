{"version":3,"sources":["../src/main.js"],"names":["define","Ajax","Notification","SELECTORS","setSelectors","slotid","slotIdClass","VERSION_LIST","SLOT_ID","changeVersion","slotId","output","selectElement","document","querySelector","addEventListener","result","textContent","init","console","log"],"mappings":"AAwBAA,OAAM,iBAAC,CACH,WADG,CAEH,mBAFG,CAGH,gBAHG,CAAD,CAIH,SACCC,CADD,CAECC,CAFD,CAID,IAQMC,CAAAA,CAAS,CAAG,EARlB,CAgBMC,CAAY,CAAG,SAASC,CAAT,CAAiB,CAChC,GAAIC,CAAAA,CAAW,CAAG,EAAlB,CACA,GAAID,CAAJ,CAAY,CACRC,CAAW,CAAG,IAAMD,CACvB,CAEDF,CAAS,CAAG,CACRI,YAAY,CAAE,WAAaD,CADnB,CAERE,OAAO,CAAE,QAAUF,CAFX,CAIf,CA1BH,CAwDMG,CAAa,CAAG,SAASC,CAAT,CAAiBC,CAAjB,CAAyB,CACzC,GAAMC,CAAAA,CAAa,CAAGC,QAAQ,CAACC,aAAT,CAAuBX,CAAS,CAACI,YAAjC,CAAtB,CAEAK,CAAa,CAACG,gBAAd,CAA+B,QAA/B,CAAyC,UAAM,CAC3CX,CAAY,CAACM,CAAD,CAAZ,CAGA,GAAMM,CAAAA,CAAM,CAAGH,QAAQ,CAACC,aAAT,CAAuBX,CAAS,CAACK,OAAjC,CAAf,CACAQ,CAAM,CAACC,WAAP,CAAqBN,CAcxB,CAnBD,CAoBH,CA/EH,CAuFE,MAAO,CACHO,IAAI,CAPG,QAAPA,CAAAA,IAAO,CAASR,CAAT,CAAiBC,CAAjB,CAAyB,CAChCQ,OAAO,CAACC,GAAR,CAAYT,CAAZ,EACAP,CAAY,CAACM,CAAD,CAAZ,CACAD,CAAa,CAACC,CAAD,CAASC,CAAT,CAChB,CAEM,CAGV,CAlGK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Main javascript for the block\n *\n * @package     block_msteams\n * @author      Jwalit Shah <jwalitshah@catalyst-au.net>\n * @copyright   2020 Catalyst IT\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'core/ajax',\n    'core/notification',\n    'core/templates',\n], function(\n    Ajax,\n    Notification,\n    Templates,\n) {\n\n    /**\n     *\n     * Initialize CSS selectors.\n     *\n     * @type {object}\n     */\n    let SELECTORS = {};\n\n    /**\n     * Set CSS selector.\n     * Add slot id to class if is not null.\n     *\n     * @param {int} slotid The slot id.\n     */\n    var setSelectors = function(slotid) {\n        let slotIdClass = '';\n        if (slotid) {\n            slotIdClass = '-' + slotid;\n        }\n\n        SELECTORS = {\n            VERSION_LIST: '#version' + slotIdClass,\n            SLOT_ID: '#slot' + slotIdClass,\n        };\n    };\n\n    /**\n     * Helper ajax function.\n     *\n     * @param {object} request The request to be made.\n     * @param {function} done The function to be executed once ajax call is done.\n     */\n    var ajax = function (request, done) {\n        //toggleLoading();\n\n        return Ajax.call(request)[0].done(function (response) {\n            //toggleLoading();\n            done(response);\n        }).fail(Notification.exception);\n    };\n\n    /**\n     * Toggle loading spinner.\n     *\n     */\n    var toggleLoading = function() {\n        var loadingBlock = document.querySelector(SELECTORS.LOADING_BLOCK);\n        var loadingSpinner = loadingBlock.querySelector(SELECTORS.LOADING_BLOCK_ICON);\n\n        loadingBlock.classList.toggle('hidden');\n        loadingSpinner.classList.toggle('hidden');\n    };\n\n\n    var changeVersion = function(slotId, output) {\n        const selectElement = document.querySelector(SELECTORS.VERSION_LIST);\n\n        selectElement.addEventListener('change', () => {\n            setSelectors(slotId);\n\n            /**/\n            const result = document.querySelector(SELECTORS.SLOT_ID);\n            result.textContent = output;\n           /**/\n            /*var mainContainer = document.querySelector(SELECTORS.SLOT_ID);\n            var request = [{\n                methodname: 'mod_quiz_get_question_slot',\n                args: {\n                    slotid: slotId,\n                }\n            }];\n            ajax(request, function(response) {\n                Templates.render('mod_quiz/main', response).then(function(html) {\n                    mainContainer.innerHTML = html;\n                });\n            });*/\n        });\n    };\n\n    var init = function(slotId, output) {\n        console.log(output);\n        setSelectors(slotId);\n        changeVersion(slotId, output);\n    };\n\n    return {\n        init: init\n    };\n});"],"file":"main.min.js"}