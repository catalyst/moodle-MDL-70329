{"version":3,"sources":["../src/comment.js"],"names":["clickEvent","root","selector","modalPromise","ModalFactory","create","type","types","CANCEL","large","then","modal","Str","get_string","string","setTitle","fail","Notification","exception","on","CustomEvents","events","activate","e","preventDefault","currentTarget","target","parentElement","questionId","getAttribute","courseID","contextId","commentFragment","Fragment","loadFragment","questionid","courseid","setBody","getRoot","ModalEvents","cancel","location","reload","hide","init","questionSelector"],"mappings":"oRAwBA,OACA,OACA,OACA,OACA,OACA,OACA,O,sDAEMA,CAAAA,CAAU,CAAG,SAACC,CAAD,CAAOC,CAAP,CAAoB,CACnC,GAAIC,CAAAA,CAAY,CAAGC,UAAaC,MAAb,CACf,CACIC,IAAI,CAAEF,UAAaG,KAAb,CAAmBC,MAD7B,CAEIC,KAAK,GAFT,CADe,CAIZ,CAACR,CAAD,CAAOC,CAAP,CAJY,EAKjBQ,IALiB,CAKZ,SAACC,CAAD,CAAW,CACdC,UAAIC,UAAJ,CAAe,eAAf,CAAgC,eAAhC,EACKH,IADL,CACU,SAACI,CAAD,CAAY,CACdH,CAAK,CAACI,QAAN,CAAeD,CAAf,EACA,MAAOA,CAAAA,CACV,CAJL,EAKKE,IALL,CAKUC,UAAaC,SALvB,EAMA,MAAOP,CAAAA,CACV,CAbkB,CAAnB,CAcAV,CAAI,CAACkB,EAAL,CAAQC,UAAaC,MAAb,CAAoBC,QAA5B,CAAsCpB,CAAtC,CAAgD,SAACqB,CAAD,CAAO,CACnDA,CAAC,CAACC,cAAF,GADmD,GAE/CC,CAAAA,CAAa,CAAGF,CAAC,CAACG,MAAF,CAASC,aAFsB,CAG/CC,CAAU,CAAGH,CAAa,CAACI,YAAd,CAA2B,iBAA3B,CAHkC,CAI/CC,CAAQ,CAAGL,CAAa,CAACI,YAAd,CAA2B,eAA3B,CAJoC,CAK/CE,CAAS,CAAGN,CAAa,CAACI,YAAd,CAA2B,gBAA3B,CALmC,CAMnD1B,CAAY,CAACO,IAAb,CAAkB,SAACC,CAAD,CAAW,IAKrBqB,CAAAA,CAAe,CAAGC,UAASC,YAAT,CAAsB,eAAtB,CAAuC,kBAAvC,CAA2DH,CAA3D,CAJX,CACPI,UAAU,CAAEP,CADL,CAEPQ,QAAQ,CAAEN,CAFH,CAIW,CALG,CAMzBnB,CAAK,CAAC0B,OAAN,CAAcL,CAAd,EACArB,CAAK,CAAC2B,OAAN,GAAgBnB,EAAhB,CAAmBoB,UAAYC,MAA/B,CAAuC,SAACjB,CAAD,CAAO,CAC1CA,CAAC,CAACC,cAAF,GACAiB,QAAQ,CAACC,MAAT,GACA/B,CAAK,CAACgC,IAAN,EACH,CAJD,EAKAhC,CAAK,CAAC2B,OAAN,GAAgBnB,EAAhB,CAAmBoB,UAAYI,IAA/B,CAAqC,SAACpB,CAAD,CAAO,CACxCA,CAAC,CAACC,cAAF,GACAiB,QAAQ,CAACC,MAAT,GACA/B,CAAK,CAACgC,IAAN,EACH,CAJD,EAKA,MAAOhC,CAAAA,CACV,CAlBD,EAkBGK,IAlBH,CAkBQC,UAAaC,SAlBrB,CAmBH,CAzBD,CA0BH,C,CAEY0B,CAAI,CAAG,SAAC3C,CAAD,CAAO4C,CAAP,CAA4B,CAC5C7C,CAAU,CAAC,cAAEC,CAAF,CAAD,CAAU4C,CAAV,CACb,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Column selector js.\n *\n * @package    qbank_comment\n * @copyright  2021 Catalyst IT Australia Pty Ltd\n * @author     Safat Shahin <safatshahin@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport Fragment from 'core/fragment';\nimport Str from 'core/str';\nimport ModalEvents from 'core/modal_events';\nimport ModalFactory from 'core/modal_factory';\nimport Notification from 'core/notification';\nimport CustomEvents from 'core/custom_interaction_events';\n\nconst clickEvent = (root, selector) => {\n    let modalPromise = ModalFactory.create(\n        {\n            type: ModalFactory.types.CANCEL,\n            large: true\n        }, [root, selector]\n    ).then((modal) => {\n        Str.get_string('commentheader', 'qbank_comment')\n            .then((string) => {\n                modal.setTitle(string);\n                return string;\n            })\n            .fail(Notification.exception);\n        return modal;\n    });\n    root.on(CustomEvents.events.activate, selector, (e) => {\n        e.preventDefault();\n        let currentTarget = e.target.parentElement;\n        let questionId = currentTarget.getAttribute('data-questionid'),\n            courseID = currentTarget.getAttribute('data-courseid'),\n            contextId = currentTarget.getAttribute('data-contextid');\n        modalPromise.then((modal) => {\n            let args = {\n                questionid: questionId,\n                courseid: courseID\n            };\n            let commentFragment = Fragment.loadFragment('qbank_comment', 'question_comment', contextId, args);\n            modal.setBody(commentFragment);\n            modal.getRoot().on(ModalEvents.cancel, (e) => {\n                e.preventDefault();\n                location.reload();\n                modal.hide();\n            });\n            modal.getRoot().on(ModalEvents.hide, (e) => {\n                e.preventDefault();\n                location.reload();\n                modal.hide();\n            });\n            return modal;\n        }).fail(Notification.exception);\n    });\n};\n\nexport const init = (root, questionSelector) => {\n    clickEvent($(root), questionSelector);\n};"],"file":"comment.min.js"}