{"version":3,"sources":["../src/comment_column.js"],"names":["define","$","Fragment","Str","ModalEvents","ModalFactory","Notification","CustomEvents","clickEvent","root","selector","modalPromise","create","type","types","CANCEL","large","then","modal","get_string","string","setTitle","fail","exception","on","events","activate","e","preventDefault","currentTarget","target","parentElement","questionId","getAttribute","courseID","contextId","commentFragment","loadFragment","questionid","courseid","setBody","getRoot","cancel","location","reload","hide","init","questionSelector"],"mappings":"AAwBAA,OAAM,gCAAC,CACC,QADD,CAEC,eAFD,CAGC,UAHD,CAIC,mBAJD,CAKC,oBALD,CAMC,mBAND,CAOC,gCAPD,CAAD,CASF,SACIC,CADJ,CAEIC,CAFJ,CAGIC,CAHJ,CAIIC,CAJJ,CAKIC,CALJ,CAMIC,CANJ,CAOIC,CAPJ,CAQE,CASE,GAAIC,CAAAA,CAAU,CAAG,SAAUC,CAAV,CAAgBC,CAAhB,CAA0B,CAEvC,GAAIC,CAAAA,CAAY,CAAGN,CAAY,CAACO,MAAb,CACf,CACIC,IAAI,CAAER,CAAY,CAACS,KAAb,CAAmBC,MAD7B,CAEIC,KAAK,GAFT,CADe,CAIZ,CAACP,CAAD,CAAOC,CAAP,CAJY,EAKjBO,IALiB,CAKZ,SAAUC,CAAV,CAAiB,CACpBf,CAAG,CAACgB,UAAJ,CAAe,eAAf,CAAgC,eAAhC,EACKF,IADL,CACU,SAAUG,CAAV,CAAkB,CACpBF,CAAK,CAACG,QAAN,CAAeD,CAAf,EACA,MAAOA,CAAAA,CACV,CAJL,EAKKE,IALL,CAKUhB,CAAY,CAACiB,SALvB,EAMA,MAAOL,CAAAA,CACV,CAbkB,CAAnB,CAeAT,CAAI,CAACe,EAAL,CAAQjB,CAAY,CAACkB,MAAb,CAAoBC,QAA5B,CAAsChB,CAAtC,CAAgD,SAAUiB,CAAV,CAAa,CACzDA,CAAC,CAACC,cAAF,GADyD,GAErDC,CAAAA,CAAa,CAAGF,CAAC,CAACG,MAAF,CAASC,aAF4B,CAGrDC,CAAU,CAAGH,CAAa,CAACI,YAAd,CAA2B,iBAA3B,CAHwC,CAIrDC,CAAQ,CAAGL,CAAa,CAACI,YAAd,CAA2B,eAA3B,CAJ0C,CAKrDE,CAAS,CAAGN,CAAa,CAACI,YAAd,CAA2B,gBAA3B,CALyC,CAMzDtB,CAAY,CAACM,IAAb,CAAkB,SAAUC,CAAV,CAAiB,IAK3BkB,CAAAA,CAAe,CAAGlC,CAAQ,CAACmC,YAAT,CAAsB,eAAtB,CAAuC,kBAAvC,CAA2DF,CAA3D,CAJX,CACPG,UAAU,CAAEN,CADL,CAEPO,QAAQ,CAAEL,CAFH,CAIW,CALS,CAM/BhB,CAAK,CAACsB,OAAN,CAAcJ,CAAd,EACAlB,CAAK,CAACuB,OAAN,GAAgBjB,EAAhB,CAAmBpB,CAAW,CAACsC,MAA/B,CAAuC,SAAUf,CAAV,CAAa,CAChDA,CAAC,CAACC,cAAF,GACAe,QAAQ,CAACC,MAAT,GACA1B,CAAK,CAAC2B,IAAN,EACH,CAJD,EAKA3B,CAAK,CAACuB,OAAN,GAAgBjB,EAAhB,CAAmBpB,CAAW,CAACyC,IAA/B,CAAqC,SAAUlB,CAAV,CAAa,CAC9CA,CAAC,CAACC,cAAF,GACAe,QAAQ,CAACC,MAAT,GACA1B,CAAK,CAAC2B,IAAN,EACH,CAJD,EAKA,MAAO3B,CAAAA,CACV,CAlBD,EAkBGI,IAlBH,CAkBQhB,CAAY,CAACiB,SAlBrB,CAmBH,CAzBD,CA0BH,CA3CD,CA6CA,MAAO,CACHuB,IAAI,CAAE,cAAUrC,CAAV,CAAgBsC,CAAhB,CAAkC,CACpCvC,CAAU,CAACP,CAAC,CAACQ,CAAD,CAAF,CAAUsC,CAAV,CACb,CAHE,CAKV,CA5EC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Column selector js.\n *\n * @package    qbank_comment\n * @copyright  2021 Catalyst IT Australia Pty Ltd\n * @author     Safat Shahin <safatshahin@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n        'jquery',\n        'core/fragment',\n        'core/str',\n        'core/modal_events',\n        'core/modal_factory',\n        'core/notification',\n        'core/custom_interaction_events'\n    ],\n    function (\n        $,\n        Fragment,\n        Str,\n        ModalEvents,\n        ModalFactory,\n        Notification,\n        CustomEvents\n    ) {\n\n        /**\n         * Event listeners for the module.\n         *\n         * @method clickEvent\n         * @param {object} root\n         * @param {string} selector\n         */\n        var clickEvent = function (root, selector) {\n            // Modal for the question comments.\n            var modalPromise = ModalFactory.create(\n                {\n                    type: ModalFactory.types.CANCEL,\n                    large: true\n                }, [root, selector]\n            ).then(function (modal) {\n                Str.get_string('commentheader', 'qbank_comment')\n                    .then(function (string) {\n                        modal.setTitle(string);\n                        return string;\n                    })\n                    .fail(Notification.exception);\n                return modal;\n            });\n            // Event listener.\n            root.on(CustomEvents.events.activate, selector, function (e) {\n                e.preventDefault();\n                var currentTarget = e.target.parentElement;\n                var questionId = currentTarget.getAttribute('data-questionid'),\n                    courseID = currentTarget.getAttribute('data-courseid'),\n                    contextId = currentTarget.getAttribute('data-contextid');\n                modalPromise.then(function (modal) {\n                    var args = {\n                        questionid: questionId,\n                        courseid: courseID\n                    };\n                    var commentFragment = Fragment.loadFragment('qbank_comment', 'question_comment', contextId, args);\n                    modal.setBody(commentFragment);\n                    modal.getRoot().on(ModalEvents.cancel, function (e) {\n                        e.preventDefault();\n                        location.reload();\n                        modal.hide();\n                    });\n                    modal.getRoot().on(ModalEvents.hide, function (e) {\n                        e.preventDefault();\n                        location.reload();\n                        modal.hide();\n                    });\n                    return modal;\n                }).fail(Notification.exception);\n            });\n        };\n\n        return {\n            init: function (root, questionSelector) {\n                clickEvent($(root), questionSelector);\n            }\n        };\n    });"],"file":"comment_column.min.js"}