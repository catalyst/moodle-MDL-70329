define("qbank_managecategories/addcategory_dialogue",["exports","core/str","core/fragment","core_form/modalform","core/templates"],(function(_exports,_str,_fragment,_modalform,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Javascript module for addition or edition of category as a modal form.
   * Clicking "Add category" or "Edit > Edit settings" will trigger this modal.
   *
   * @module     qbank_managecategories
   * @copyright  2021 Catalyst IT Australia Pty Ltd
   * @author     Ghaly Marc-Alexandre <marc-alexandreghaly@catalyst-ca.net>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   *
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initModal=void 0,_fragment=_interopRequireDefault(_fragment),_modalform=_interopRequireDefault(_modalform),_templates=_interopRequireDefault(_templates);_exports.initModal=()=>{document.addEventListener("click",(e=>{var _document$getElementB,_document$getElementB2;const addEditButton=e.target.closest('[data-action="addeditcategory"]');if(!addEditButton)return;if(!addEditButton.dataset.actiontype)return;e.preventDefault();const title=(isEdit="edit"===addEditButton.dataset.actiontype,(0,_str.get_string)(isEdit?"editcategory":"addcategory","question"));var isEdit;const contextid=addEditButton.dataset.contextid,categoryid=addEditButton.dataset.categoryid,cmid=addEditButton.dataset.cmid,courseid=addEditButton.dataset.courseid,pagecontextid=null!==(_document$getElementB=null===(_document$getElementB2=document.getElementById("categoriesrendered"))||void 0===_document$getElementB2?void 0:_document$getElementB2.dataset.contextid)&&void 0!==_document$getElementB?_document$getElementB:contextid,modalForm=new _modalform.default({formClass:"qbank_managecategories\\form\\question_category_edit_form",args:{contextid:contextid,categoryid:categoryid,cmid:cmid,courseid:courseid},modalConfig:{title:title,large:!0},saveButtonText:title,returnFocus:addEditButton});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>getCategoriesFragment(pagecontextid,cmid,courseid).then(((html,js)=>{_templates.default.replaceNode("#categoriesrendered",html,js)})))),modalForm.show()}))};const getCategoriesFragment=(contextid,cmid,courseid)=>{const params={url:location.href};return void 0!==cmid&&(params.cmid=cmid),void 0!==courseid&&(params.courseid=courseid),_fragment.default.loadFragment("qbank_managecategories","category_rendering",contextid,params)}}));

//# sourceMappingURL=addcategory_dialogue.min.js.map